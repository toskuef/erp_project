{% extends 'layout.html' %}
{% load widget_tweaks %}
{% load static %}

{% block title %}
  {{ order }}
{% endblock %}

<!-- Блок левого меню -->
{% block sidebar %}
  {% include 'crm/includes/crm_sidebar.html' %}
{% endblock %}

<!-- Блок навигации -->
{% block navigation %}
  {% include 'crm/includes/crm_navigation.html' %}
{% endblock %}

<!-- Блок контента -->
{% block content %}


  <div class="container-fluid py-4">
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-body">
            <h5 class="mb-4"></h5>
            <div class="row">
              <div class="col-xl-5 col-lg-6 text-center">
                <img class="w-100 border-radius-lg shadow-lg mx-auto"
                     src="https://pro-dachnikov.com/uploads/posts/2021-10/1633508262_33-p-eskiz-kukhni-foto-33.jpg"
                     alt="chair">
              </div>
              <div class="col-lg-5 mx-auto">
                <h3 class="mt-lg-0 mt-4">{{ product.title }}</h3>
                <div class="rating">
                  <span class="badge bg-gradient-faded-danger">На паузе</span>
                  <i class="fas fa-star" aria-hidden="true"></i>
                  <i class="fas fa-star" aria-hidden="true"></i>
                  <i class="fas fa-star" aria-hidden="true"></i>
                  <i class="fas fa-star" aria-hidden="true"></i>
                  <i class="fas fa-star-half-alt" aria-hidden="true"></i>
                </div>
                <br>
                <h6 class="mb-0 mt-3">Стоимость</h6>
                <h5>25000.00</h5>

                <div class="row mt-4">
                  <div class="col-lg-4">
                    <button class="btn bg-gradient-light mb-0 mt-lg-auto w-100"
                            type="button" name="button"
                            hx-get="{% url 'crm:add_file' product.pk 'zam' %}"
                            hx-target="#files"
                            onclick="spinner()"
                    >Добавить замер
                    </button>
                  </div>
                  <div class="col-lg-4">
                    <button class="btn bg-gradient-light mb-0 mt-lg-auto w-100"
                            type="button" name="button"
                            hx-get="{% url 'crm:add_file' product.pk 'pr' %}"
                            hx-target="#files"
                            onclick="spinner()"
                    >Добавить проект
                    </button>
                  </div>
                  <div class="col-lg-4">
                    <button class="btn bg-gradient-light mb-0 mt-lg-auto w-100"
                            type="button" name="button"
                            hx-get="{% url 'crm:add_file' product.pk 'rs' %}"
                            hx-target="#files"
                            onclick="spinner()"
                    >Добавить расчет
                    </button>
                    <script>
                        function spinner(){
                      document.getElementById('for-spinner').insertAdjacentHTML('afterbegin',
                            "<div class='spinner-border' role='status'> <span class='sr-only'>Loading...</span> </div>"
                            )}
                    </script>
                  </div>
                </div>
                <div id="files">
                  {% include 'crm/includes/crm_product_files.html' %}
                </div>
              </div>
            </div>


          </div>
        </div>
      </div>
    </div>
  </div>
  <script>

      var objDiv = document.getElementById("parentDiv");
      objDiv.scrollTop = objDiv.scrollHeight;
      $("#submit-comm").click(function () {
              setTimeout(() => {
                  document.getElementById("form-comm").reset();
              }, 100);


          }
      )

  </script>

  <div class="calendar" id="calendar"></div>

  <script>
      const events = [
          {
              summary: 'JS Conference',
              start: {
                  date: Calendar.dayjs().format('DD/MM/YYYY'),
              },
              end: {
                  date: Calendar.dayjs().format('DD/MM/YYYY'),
              },
              color: {
                  background: '#cfe0fc',
                  foreground: '#0a47a9',
              },
          },
          {
              summary: 'Vue Meetup',
              start: {
                  date: Calendar.dayjs().add(1, 'day').format('DD/MM/YYYY'),
              },
              end: {
                  date: Calendar.dayjs().add(5, 'day').format('DD/MM/YYYY'),
              },
              color: {
                  background: '#ebcdfe',
                  foreground: '#6e02b1',
              },
          },
          {
              summary: 'Angular Meetup',
              description: 'Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur',
              start: {
                  date: Calendar.dayjs().subtract(3, 'day').format('DD/MM/YYYY'),
                  dateTime: Calendar.dayjs().subtract(3, 'day').format('DD/MM/YYYY') + ' 10:00',
              },
              end: {
                  date: Calendar.dayjs().add(3, 'day').format('DD/MM/YYYY'),
                  dateTime: Calendar.dayjs().add(3, 'day').format('DD/MM/YYYY') + ' 14:00',
              },
              color: {
                  background: '#c7f5d9',
                  foreground: '#0b4121',
              },
          },
          {
              summary: 'React Meetup',
              start: {
                  date: Calendar.dayjs().add(5, 'day').format('DD/MM/YYYY'),
              },
              end: {
                  date: Calendar.dayjs().add(8, 'day').format('DD/MM/YYYY'),
              },
              color: {
                  background: '#fdd8de',
                  foreground: '#790619',
              },
          },
          {
              summary: 'Meeting',
              start: {
                  date: Calendar.dayjs().add(1, 'day').format('DD/MM/YYYY'),
                  dateTime: Calendar.dayjs().add(1, 'day').format('DD/MM/YYYY') + ' 8:00',
              },
              end: {
                  date: Calendar.dayjs().add(1, 'day').format('DD/MM/YYYY'),
                  dateTime: Calendar.dayjs().add(1, 'day').format('DD/MM/YYYY') + ' 12:00',
              },
              color: {
                  background: '#cfe0fc',
                  foreground: '#0a47a9',
              },
          },
          {
              summary: 'Call',
              start: {
                  date: Calendar.dayjs().add(2, 'day').format('DD/MM/YYYY'),
                  dateTime: Calendar.dayjs().add(2, 'day').format('DD/MM/YYYY') + ' 11:00',
              },
              end: {
                  date: Calendar.dayjs().add(2, 'day').format('DD/MM/YYYY'),
                  dateTime: Calendar.dayjs().add(2, 'day').format('DD/MM/YYYY') + ' 14:00',
              },
              color: {
                  background: '#292929',
                  foreground: '#f5f5f5',
              },
          }
      ];

      const calendarElement = document.getElementById('calendar');
      const calendarInstance = Calendar.getInstance(calendarElement);
      calendarInstance.addEvents(events);
  </script>
{% endblock %}